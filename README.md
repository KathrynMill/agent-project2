# 🎙️ 智能语音助手 - AI Voice Assistant

基于大模型的语音对话系统，支持通过语音或文字控制电脑完成各种任务。

## 📋 项目概述

本项目实现了一个完整的智能语音助手系统，可以：
- 🎤 **语音识别**：将用户的语音转换为文字
- 🧠 **智能理解**：使用大模型深度理解用户意图
- 🔧 **任务执行**：自动规划并执行系统操作
- 🔊 **语音反馈**：将结果通过语音播报给用户

### ✨ 核心功能

1. **打开网站**：`帮我打开GitHub`
2. **播放音乐**：`播放周杰伦的稻香`
3. **写文章**：`写一篇关于人工智能的文章`
4. **生成代码**：`帮我写一个Python函数`
5. **网络搜索**：`搜索机器学习教程`
6. **复杂任务组合**：支持多步骤任务的自动规划和执行

## 🏗️ 系统架构

```
┌─────────────────────────────────────────────────────────────┐
│                         用户界面                              │
│              (Web前端 - 支持语音/文字输入)                      │
└────────────────────────┬────────────────────────────────────┘
                         │
                         ▼
┌─────────────────────────────────────────────────────────────┐
│                   语音助手服务器                               │
│               (voice_assistant_server.py)                    │
│                                                               │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │
│  │  百度API客户端 │  │  智能Agent   │  │  系统控制器   │     │
│  │              │  │              │  │              │     │
│  │  • LLM对话   │  │  • 意图理解  │  │  • 打开网站   │     │
│  │  • 语音识别  │  │  • 任务规划  │  │  • 播放音乐   │     │
│  │  • 语音合成  │  │  • 工具调用  │  │  • 文件操作   │     │
│  └──────────────┘  └──────────────┘  └──────────────┘     │
└─────────────────────────────────────────────────────────────┘
```

### 📁 项目结构

```
echo-command/
├── baidu_api_client.py          # 百度AI API客户端
├── intelligent_agent.py         # 自研智能Agent
├── system_controller.py         # 系统控制器
├── voice_assistant_server.py    # 主服务器
└── frontend/
    └── index.html              # Web前端界面
```

## 🚀 快速开始

### 1. 启动服务器

```bash
cd /home/aa/echo-command
python3 voice_assistant_server.py
```

### 2. 访问Web界面

打开浏览器访问：`http://localhost:8090`

### 3. 使用示例

- 点击麦克风按钮进行语音输入
- 或在文本框输入指令
- 系统将自动理解并执行任务

## 🔑 配置百度API（可选但推荐）

### ⚠️ 重要说明：演示模式 vs 真实LLM模式

**当前默认使用演示模式**（`BaiduAPIDemoClient`），它使用简单的规则匹配来模拟LLM响应，**不是真正的大模型**。

演示模式的限制：
- ❌ 使用规则匹配（if-else逻辑）
- ❌ 只能识别预设的几个指令模式
- ❌ 无法理解复杂或变化的用户输入
- ✅ 但可以让您在没有API Key的情况下测试系统架构

### 启用真实LLM模式

要使用**真正的大模型智能理解**，请配置百度API：

1. 访问 [百度AI开放平台](https://console.bce.baidu.com/ai/)
2. 创建应用并获取 API Key 和 Secret Key
3. 编辑 `voice_assistant_server.py`，修改初始化代码：

```python
# 将这行：
cls.api_client = BaiduAPIDemoClient()

# 改为：
cls.api_client = BaiduAPIClient(
    api_key="YOUR_ACTUAL_API_KEY",
    secret_key="YOUR_ACTUAL_SECRET_KEY"
)
```

配置后，系统将：
- ✅ 使用文心一言进行真正的语义理解
- ✅ 支持任意复杂的用户输入
- ✅ 具备上下文理解能力
- ✅ 真实的ASR语音识别和TTS语音合成

## 📖 技术实现

### 1. 智能Agent设计（不使用第三方Agent框架）

本项目**自主实现**了完整的Agent逻辑，不依赖LangChain等第三方框架：

#### 意图理解 (Intent Understanding)
- 使用LLM进行深度语义分析
- 将用户的自然语言转换为结构化意图
- 提取动作类型和参数

```python
# 示例：用户输入 "帮我打开GitHub"
意图分析结果:
{
  "action": "open_website",
  "parameters": {
    "url": "https://github.com",
    "target": "GitHub"
  }
}
```

#### 任务规划 (Task Planning)
- 自动将复杂任务分解为多个步骤
- 确定执行顺序和依赖关系

```python
# 简单任务：单步执行
"打开GitHub" → [打开网站]

# 复杂任务：多步执行
"写一篇文章" → [准备素材] → [生成内容] → [保存文件]
```

#### 工具调用 (Tool Calling)
- 动态选择合适的工具
- 传递参数并执行
- 汇总结果

### 2. 百度API集成

#### 文心一言 (LLM)
- 用于对话和意图理解
- 支持上下文维护
- 可调节temperature、top_p等参数

#### 语音识别 (ASR)
- 将用户语音转为文字
- 支持多种音频格式
- 实时识别

#### 语音合成 (TTS)
- 将文字转为语音
- 可选择发音人、语速、音调
- 支持流式输出

### 3. 系统控制器

实现了多种系统操作：

1. **网站访问**：使用`webbrowser`模块
2. **音乐播放**：通过音乐网站搜索
3. **文件操作**：读写、创建文件
4. **内容生成**：LLM生成文章、代码

## 🔄 工作流程

```
1. 用户输入
   ↓
2. 语音识别 (如果是语音输入)
   ↓
3. LLM意图理解
   ↓
4. Agent任务规划
   ↓
5. 系统控制器执行
   ↓
6. 结果反馈
   ↓
7. TTS语音播报 (可选)
```

## 🎯 设计亮点

### 1. 自研Agent架构
- ✅ 不依赖第三方Agent框架
- ✅ 完整的意图理解→任务规划→工具调用流程
- ✅ 支持简单任务和复杂任务的自动识别
- ✅ 可扩展的工具系统

### 2. 灵活的API集成
- ✅ 支持百度API（LLM + ASR + TTS）
- ✅ 演示模式可无配置运行
- ✅ 易于切换其他LLM服务商

### 3. 用户友好的界面
- ✅ 现代化Web界面设计
- ✅ 支持语音和文字双模式输入
- ✅ 实时状态反馈
- ✅ 示例指令快速上手

### 4. 高可扩展性
- ✅ 模块化设计，易于添加新功能
- ✅ 统一的工具接口
- ✅ 清晰的代码结构

## 📊 API端点

| 端点 | 方法 | 说明 |
|------|------|------|
| `/api/text` | POST | 文本输入处理 |
| `/api/voice` | POST | 语音输入处理 |
| `/api/tts` | POST | 文字转语音 |
| `/api/chat` | POST | 纯对话（不执行操作） |
| `/api/history` | GET | 获取对话历史 |
| `/health` | GET | 健康检查 |

## 🧪 测试

```bash
# 测试文本输入
curl -X POST http://localhost:8090/api/text \
  -H "Content-Type: application/json" \
  -d '{"text": "帮我打开GitHub"}'

# 测试健康检查
curl http://localhost:8090/health
```

## 📝 许可证

本项目为课程作业项目。

## 👨‍💻 作者

开发于 2025年10月

---

**注意**：本项目仅调用LLM、ASR、TTS API，不使用第三方Agent框架，所有Agent逻辑均为自主实现。

