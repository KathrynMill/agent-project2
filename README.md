# Echo Command - 语音控制电脑应用

## 项目概述

Echo Command 是一个基于大模型的语音控制电脑应用，允许用户通过自然语言语音指令来控制电脑执行各种任务，如播放音乐、写文章、系统控制等。

## 功能特性

### 核心功能 (P0)
- 🎤 **语音识别** - 实时语音转文本
- 🧠 **智能理解** - 基于GPT-4o的意图解析
- 🔊 **语音合成** - 自然语音回复
- 🖥️ **系统控制** - 播放音乐、打开应用、调节音量

### 增强功能 (P1)
- 📁 **文件操作** - 创建、编辑、删除文件
- ✍️ **文本处理** - 写文章、总结文档
- ℹ️ **信息查询** - 查看时间、天气、系统状态

### 高级功能 (P2)
- 🔗 **任务组合** - 多步骤任务自动化
- ⚙️ **自定义指令** - 用户定义宏命令
- 📚 **历史记录** - 保存和回放指令历史

## 技术架构

### 系统架构图

```
+-----------------------------------------------------------------------------------------+
|                                         用户                                          |
+-----------------------------------------------------------------------------------------+
       |                                      ^
       | 语音输入                             | 语音/UI反馈
       V                                      |
+-----------------------------------------------------------------------------------------+
| Frontend: Electron + Vue.js (用户设备)                                                  |
|-----------------------------------------------------------------------------------------|
| 1. UI层 (UI Layer)                                                                      |
|    - 状态窗口 (StatusWindow.vue)                                                        |
|    - 系统托盘 (Tray.vue)                                                                |
|    - 设置页 (Settings.vue)                                                              |
|-----------------------------------------------------------------------------------------|
| 2. 状态管理 (State Management - Pinia)                                                  |
|    - sessionStore (管理实时交互状态)                                                    |
|    - settingsStore (管理用户配置和Token)                                                |
|-----------------------------------------------------------------------------------------|
| 3. 服务层 (Service Layer)                                                               |
|    - AudioService.js (访问麦克风)                                                       |
|    - WebSocketService.js (与本地后端进行实时通信)                                       |
|    - CloudApiService.js (通过本地后端代理访问云端)                                      |
+-----------------------------------------------------------------------------------------+
       |                                      ^
       | WebSocket (ws://127.0.0.1:8000)      | JSON 消息
       V                                      |
+-----------------------------------------------------------------------------------------+
| Local Backend: Python + FastAPI (用户设备)                                              |
|-----------------------------------------------------------------------------------------|
| 1. API层 (API Layer)                                                                    |
|    - WebSocket Endpoint: /ws (处理实时指令)                                             |
|    - HTTP Endpoint: /api/... (作为前端访问云端的安全代理)                               |
|-----------------------------------------------------------------------------------------|
| 2. 业务逻辑层 (Business Logic Layer)                                                    |
|    - SessionManager.py (管理单次语音交互的生命周期)                                     |
|    - CommandExecutor.py (协调AI与系统控制)                                              |
|-----------------------------------------------------------------------------------------|
| 3. AI核心 (AI Core)                                                                     |
|    - TranscriptionService (封装 Whisper)                                                |
|    - IntentParserService (封装 GPT-4o Function Calling)                                 |
|    - ResponseGeneratorService (封装 TTS)                                                |
|-----------------------------------------------------------------------------------------|
| 4. 系统控制层 (System Control Layer)                                                    |
|    - controller_factory.py (根据当前OS返回正确的控制器)                                 |
|    - windows_controller.py / macos_controller.py (平台具体实现) ---> [操作系统API]     |
|-----------------------------------------------------------------------------------------|
| 5. 云端通信层 (Cloud Communication Layer)                                               |
|    - CloudApiClient.py (调用云端REST API)                                               |
|    - KafkaProducer.py (向Kafka发送异步事件)                                             |
+-----------------------------------------------------------------------------------------+
```

## 技术栈

### 前端
- **Electron** - 跨平台桌面应用框架
- **Vue.js 3** - 响应式UI框架
- **Pinia** - 状态管理
- **WebSocket** - 实时通信

### 后端
- **Python 3.9+** - 主要开发语言
- **FastAPI** - 高性能Web框架
- **WebSocket** - 实时通信支持
- **asyncio** - 异步处理

### AI服务
- **OpenAI GPT-4o** - 大语言模型
- **Whisper** - 语音识别
- **TTS** - 文本转语音

### 系统控制
- **pyautogui** - 自动化控制
- **psutil** - 系统信息
- **subprocess** - 进程管理

## 安装与运行

### 环境要求
- Python 3.9+
- Node.js 16+
- 操作系统：Windows 10+, macOS 10.15+, Ubuntu 18.04+

### 安装步骤

1. 克隆项目
```bash
git clone <repository-url>
cd echo-command
```

2. 安装后端依赖
```bash
cd backend
pip install -r requirements.txt
```

3. 安装前端依赖
```bash
cd ../frontend
npm install
```

4. 配置环境变量
```bash
cp .env.example .env
# 编辑 .env 文件，添加 OpenAI API Key
```

5. 运行应用
```bash
# 启动后端
cd backend
python main.py

# 启动前端（新终端）
cd frontend
npm run electron:dev
```

## 使用说明

1. 启动应用后，点击系统托盘图标
2. 点击"开始聆听"按钮
3. 说出您的指令，例如：
   - "播放音乐"
   - "打开记事本"
   - "写一篇关于AI的文章"
   - "调节音量到50%"

## 开发计划

### 阶段一：核心功能实现
- [x] 项目架构设计
- [ ] 后端核心服务
- [ ] 前端基础界面
- [ ] 语音识别集成
- [ ] LLM集成
- [ ] 基础系统控制

### 阶段二：功能增强
- [ ] 文件操作功能
- [ ] 文本处理功能
- [ ] 系统信息查询
- [ ] 错误处理优化

### 阶段三：高级功能
- [ ] 任务组合功能
- [ ] 自定义指令
- [ ] 历史记录
- [ ] 性能优化

## 贡献指南

1. Fork 项目
2. 创建功能分支
3. 提交更改
4. 推送到分支
5. 创建 Pull Request

## 许可证

MIT License

## 联系方式

如有问题或建议，请提交 Issue 或联系开发团队。

